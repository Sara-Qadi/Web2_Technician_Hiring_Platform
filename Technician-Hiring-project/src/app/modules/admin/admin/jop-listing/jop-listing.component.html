<app-navbar-admin></app-navbar-admin>

<main class="page-content">
<div class="container py-5">
  <h2 class="text-center text-color-primary fw-bold mb-4">Job Postings</h2>

  <div class="d-flex justify-content-center mb-4">
    <div class="position-relative w-50">
      <input
        type="text"
        class="form-control search-input"
        placeholder="Search by job title or location"
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange()"
      />
      <i class="bi bi-search search-icon"></i>
    </div>
  </div>



  <div *ngIf="loading" class="text-center mb-4">Loading job postings...</div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <div class="row justify-content-center gy-4" *ngIf="!loading && jobs.length > 0">
  <div class="col-6 col-md-4" *ngFor="let job of jobs">
    <app-jobblock
      [job]="job"
      [role]="role"
      (deleteRequest)="requestDelete($event)">
    </app-jobblock>
  </div>
</div>


  <div *ngIf="!loading && jobs.length === 0" class="text-center">There are no job postings to display.</div>
</div>
</main>
<app-footer-admin></app-footer-admin>

<!-- Confirmation Popup -->
<div class="popup-backdrop" *ngIf="showPopup">
  <div class="popup-card">
    <h3 class="mb-3">Confirm Deletion</h3>
    <p>Are you sure you want to delete this job post?</p>

    <div class="d-flex justify-content-end gap-2 mt-4">
      <button class="btn btn-outline-secondary" (click)="cancelDelete()">
        Cancel
      </button>
      <button class="btn btn-danger" (click)="confirmDelete()">
        Delete
      </button>
    </div>
  </div>
</div>
