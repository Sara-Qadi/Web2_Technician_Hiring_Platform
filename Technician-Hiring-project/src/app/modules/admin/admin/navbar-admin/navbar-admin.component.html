<div class="main-content" style="width: 100vw;">
  <div class="top-navbar d-flex justify-content-between align-items-center px-4 py-1">

    <button
      *ngIf="loggedIn && isInProfilePage && role !== 1"
      (click)="logout()"
      class="btn btn-outline-danger btn-sm"
      title="Logout">
      <i class="bi bi-box-arrow-right"></i> Logout
    </button>

    <a class="navbar-brand d-flex align-items-center" routerLink="">
      <div class="logo-section position-absolute top-50 start-50 translate-middle text-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#fff"
             class="bi bi-gear-wide-connected" viewBox="0 0 16 16">
          <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
        </svg>
      </div>
    </a>

    <div class="d-flex gap-3 align-items-center small-text">

      <a *ngIf="!loggedIn" routerLink="/login" class="btn btn-outline-primary btn-sm">
        Login
      </a>

      <div *ngIf="loggedIn" class="admin-user-wrapper position-relative">
        <a class="user-info d-flex align-items-center gap-2"
           title="Account"
           (click)="handleUserClick($event)">
          <i class="bi bi-person-circle user-icon"></i>
          <span class="user-name">{{ username }}</span>
          <i *ngIf="role === 1" class="bi bi-chevron-down admin-arrow"></i>
        </a>

        <div *ngIf="role === 1 && adminDropdownOpen" class="admin-dropdown">
          <button class="dropdown-item logout-item" (click)="logout()">
            <i class="bi bi-box-arrow-right me-2"></i> Logout
          </button>
        </div>
      </div>

    </div>

  <nav class="bottom-navbar d-flex justify-content-center gap-5 py-2">

  <ng-container *ngIf="displayRole === 1; else notAdmin">
    <a routerLink="/admin/dashboard" routerLinkActive="active" class="nav-link">Dashboard</a>
    <a routerLink="/admin/craftsmen-registrations" routerLinkActive="active" class="nav-link">Registration</a>
    <a routerLink="/admin/jop-listing" routerLinkActive="active" class="nav-link">Jobs</a>
    <a routerLink="/admin/delete-craftsman" routerLinkActive="active" class="nav-link">Users</a>
    <a routerLink="/admin/manage-reports" routerLinkActive="active" class="nav-link">Manage Reports</a>
    <a routerLink="/reports/analytics" routerLinkActive="active" class="nav-link">Reports</a>
    <a [routerLink]="['/sign-up']" [queryParams]="{ role: 'admin' }" routerLinkActive="active" class="nav-link">
      Create New Admin Account
    </a>
  </ng-container>

  <ng-template #notAdmin>
    <ng-container *ngIf="displayRole === 2; else notJobOwner">
      <a routerLink="/home" routerLinkActive="active" class="nav-link">Home</a>
      <a routerLink="/allproposals" routerLinkActive="active" class="nav-link">My Bids</a>
      <a [routerLink]="['/jobowner', userId]" routerLinkActive="active" class="nav-link">My Jobs</a>
      <a routerLink="/reports/analytics" routerLinkActive="active" class="nav-link">Reports</a>
    </ng-container>
  </ng-template>

  <ng-template #notJobOwner>
    <ng-container *ngIf="displayRole === 3; else loadingOrGuest">
      <a routerLink="/home" routerLinkActive="active" class="nav-link">Home</a>
      <a routerLink="/mybids" routerLinkActive="active" class="nav-link">My Bids</a>
      <a [routerLink]="['/jobowner', userId]" routerLinkActive="active" class="nav-link">My Jobs</a>
    </ng-container>
  </ng-template>

  <ng-template #loadingOrGuest>
    <ng-container *ngIf="loggedIn; else guestLinks">
      <span class="nav-placeholder">Loading menuâ€¦</span>
    </ng-container>

    <ng-template #guestLinks>
      <a routerLink="/home" routerLinkActive="active" class="nav-link">Home</a>
      <a routerLink="/login" routerLinkActive="active" class="nav-link">Login</a>
    </ng-template>
  </ng-template>

  <div class="position-absolute end-0 me-4">
    <button class="icon-btn me-3" routerLink="/messages">
      <i class="bi bi-messenger"></i>
    </button>

    <button class="icon-btn" (click)="toggleDropdown()" title="Notifications" style="position: relative;">
      <i class="bi bi-bell"></i>
      <span *ngIf="unreadCount > 0" class="notification-badge">
        {{ unreadCount }}
      </span>
    </button>

    <app-notification-dropdown [dropdownOpen]="dropdownOpen"></app-notification-dropdown>
  </div>

</nav>

  </div>
</div>
