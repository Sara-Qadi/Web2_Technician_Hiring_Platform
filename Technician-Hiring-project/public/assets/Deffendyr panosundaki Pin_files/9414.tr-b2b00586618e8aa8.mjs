"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["9414"],{663952:function(e,t,r){r.d(t,{D:()=>c,q:()=>d});var a=r(667294),i=r(616550),n=r(575820),o=r(785893);let s=(0,a.createContext)(!1),l=()=>{let e=(0,i.TH)(),t=(0,i.k6)();return t.location.state?.isAppFactoryOAuth||((0,n.mB)(e.search).next??"").startsWith("/app-factory-oauth/")};function c({children:e}){let t=l(),[r,i]=(0,a.useState)(t);return(0,a.useEffect)(()=>{t&&i(!0)},[t]),(0,o.jsx)(s.Provider,{value:r,children:e})}function d(){return(0,a.useContext)(s)}},433069:function(e,t,r){r.d(t,{G:()=>s,b:()=>l});var a=r(667294),i=r(616550),n=r(785893);let o=(0,a.createContext)(!0);function s({children:e}){let t=(0,i.TH)(),[r,s]=(0,a.useState)(!0),l=(0,a.useRef)(t);return(0,a.useEffect)(()=>{l.current!==t&&(l.current=t,s(!1))},[t]),(0,n.jsx)(o.Provider,{value:r,children:e})}function l(){return(0,a.useContext)(o)}},240353:function(e,t,r){r.d(t,{Z:()=>eg});var a=r(616550),i=r(680405),n=r(15881),o=r(746868),s=r(217095),l=r(883119),c=r(739405),d=r(785893);function u({children:e}){let t=(0,c.ml)();return(0,d.jsx)(l.Q_,{deviceType:t?"mobile":"desktop",children:e})}var p=r(774838);let m=["web_gestalt_visualrefresh","web_gestalt_calico01"];function h({children:e}){let t=(0,p.B)(),r=m.reduce((e,r)=>({...e,[r]:t.experimentsClient.checkExperiment(r)}),{});return(0,d.jsx)(l.II,{value:r,children:e})}var _=r(667294),f=r(767415);function g(e){(0,f.nP)("gestalt-component-impression",{tags:{component:e}})}var w=r(609252),v=r(680391),y=r(74972);function b({children:e}){let{sheetMobileHandlers:t,linkHandlers:r,radioGroupHandlers:a,datePickerHandlers:i,dateFieldHandlers:n,dateRangeHandlers:o}=function(){let{setAppFocusState:e}=(0,y.I)(),t=(0,_.useCallback)(()=>{w.Z.pause(),e(!1)},[e]),r=(0,_.useCallback)(()=>{w.Z.resume(),e(!0)},[e]),a=(0,_.useMemo)(()=>({onOpen:t,onClose:r}),[t,r]),i=(0,_.useMemo)(()=>({onRender:()=>{g("RadioGroup")}}),[]),n=(0,_.useMemo)(()=>({onRender:()=>{g("DateField")}}),[]),o=(0,_.useMemo)(()=>({onRender:()=>{g("DatePicker")}}),[]),s=(0,_.useMemo)(()=>({onRender:()=>{g("DateRange")}}),[]);return{linkHandlers:(0,_.useMemo)(()=>({onNavigation:({href:e,target:t})=>(0,v.Z)({href:e,target:t})}),[]),sheetMobileHandlers:a,radioGroupHandlers:i,dateFieldHandlers:n,datePickerHandlers:o,dateRangeHandlers:s}}();return(0,d.jsx)(l.uu,{dateFieldHandlers:n,datePickerHandlers:i,dateRangeHandlers:o,linkHandlers:r,radioGroupHandlers:a,sheetMobileHandlers:t,children:e})}var P=r(400962),T=r(94082),E=r(663952),k=r(433069),x=r(173202),I=r(705460),A=r(953833),C=r(49831),S=r(185302),D=r(28692),Z=r(169166),N=r(506807),L=r(385372),j=r(204807),R=r(398006),O=r(648447),B=r(969809);let M=e=>{let{deviceType:t,isBot:r,isSocialBot:a}=e;return`coreWebVitalsLite.v1.${a&&"socialBot"||r&&"bot"||"nonbot"}.${t}`};var $=r(662896);let U=({botType:e,browserName:t,deviceType:r,region:a})=>{let i=`pwtlogger.${e}.${r}`,n=["all",...a?[a.toLowerCase()]:[]];"OTHER"!==a&&n.push("ALL_EXCLUDING_OTHER");let o=[];"desktop"===r?("Chrome"===t||"Edge"===t||"Safari"===t||"Firefox"===t||"Opera"===t)&&(o=[t.toLowerCase().replace(/\s/g,"_")]):"phone"===r?("Chrome"===t||"Mobile Safari"===t||"Samsung Browser"===t||"Chrome WebView"===t||"GSA"===t)&&(o=[t.toLowerCase().replace(/\s/g,"_")]):"tablet"===r&&"Chrome"===t&&(o=[t.toLowerCase().replace(/\s/g,"_")]);let s=["all",...o],l=[];return n.forEach(e=>{s.forEach(t=>{l.push(`${i}.region_${e}.browser_${t}`)})}),l};var F=r(685755),H=r(579698);let z=e=>10*Math.round(e/10),V={pin_closeup:{LCP:"pin_closeup_lcp",INP:"pin_closeup_inp"},board:{LCP:"board_lcp",INP:"board_inp"},other_profile:{LCP:"other_profile_lcp",INP:"other_profile_inp"},topic:{LCP:"topic_lcp",INP:"topic_inp"}},W=["CA","GB","DE","FR","AU","JP","BR","MX","AU","IN"],G=({surface:e,pwtStaticContext:t})=>{switch(e){case"pin_closeup":return[...t.isAuthenticated?["desktop"===t.deviceType?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page"]:[],t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth",...t.isAuthenticated&&"desktop"===t.deviceType?["closeup_dweb_side_by_side_redesign_fast_follow"]:[]];case"board":return[t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth"];default:return[]}},q=({pwtStaticContext:e,surface:t})=>{let r=(0,R.Jx)({annotateExperiments:G({surface:t,pwtStaticContext:e}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:V[t].LCP,pwtStaticContext:e}),a=(0,R.Jx)({name:V[t].INP,pwtStaticContext:e});return(e,t)=>{"LCP"===e?r.stop(t):"INP"===e&&a.stop(t)}},Y=({pwtStaticContext:e,surface:t,getCurrentRoute:r})=>{let a=q({pwtStaticContext:e,surface:t}),{isAuthenticated:i,isBot:n,isSocialBot:o,deviceType:s,country:l,fullPath:c,browserName:d,osName:u}=e,p={},m=({name:m,value:h,metricDetails:_})=>{if(!p[m]){let g;p[m]=!0;let w=M(e),v=`${w}.${t}.${m}`,y=`${w}.tags.${t}.${m}`;if(g="iOS"===u&&"Chrome"===d?"iOS_Chrome":"CrUX","LCPCount"===m)(0,f.QX)(`${v}.sum`,h,{sampleRate:1}),(0,f.nP)(`${v}.size`,{sampleRate:1});else{let e=(0,B.Z)(l),u=(0,$.Z)(c);if("INP"===m){if(_){let{rating:t,navigationType:a}=_,{interactionTime:n,interactionType:o,loadState:s}=_.attribution,l=(0,F.Z)(n),{path:c}=r(),u={isAuth:i,path:c,CrUXSegment:g,region:e,CWVBucket:t,eventTimeGroup:l,interactionType:o,loadState:s,navigationType:a,domain:(0,j.xR)(document.domain||"unknown")};if((0,f.LY)(`${v}`,h,{sampleRate:1}),(0,f.LY)(`${y}`,h,{sampleRate:1,tags:u}),"Chrome"===d&&_.attribution){let e=(0,H.bJ)(_);e&&(0,f.LY)(`${v}.INPBoundary`,h,{sampleRate:1,tags:{...u,INPBoundary:e}}),["inputDelay","processingDuration","presentationDelay"].forEach(e=>{(0,f.LY)(`${v}.${e}`,_.attribution[e],{sampleRate:1,tags:u})})}}}else"LCP"===m?((0,f.LY)(`${v}`,h,{sampleRate:1}),(0,f.LY)(`${y}`,h,{sampleRate:1,tags:{isAuth:i,CrUXSegment:g,region:e,...u&&{pinType:u}}})):"CLS"===m&&((0,f.LY)(`${v}`,1e3*h,{sampleRate:1}),(0,f.LY)(`${y}`,1e3*h,{sampleRate:1,tags:{isAuth:i,CrUXSegment:g,region:e}}));!i&&W.includes(l)&&U({botType:o&&"socialBot"||n&&"bot"||"nonbot",browserName:d,deviceType:s,region:e}).forEach(e=>{(0,f.LY)(`${e}.tags.growthSEO.${t}_${m}`,h,{sampleRate:1,tags:{country:l}})}),a(m,h)}}};(0,L.NO)(({value:e})=>{m({name:"LCPCount",value:(0,O.Kj)()}),m({name:"LCP",value:z(e)})}),(0,L.a4)(({value:e})=>{m({name:"FCP",value:e})}),(0,L.Yn)(e=>{m({name:"INP",value:e.value,metricDetails:e})}),(0,L.mw)(({value:e})=>{m({name:"CLS",value:e})})};var J=r(426035),X=r(381571);let K=(0,r(774303).XV)("LayoutShiftDebugger"),Q=e=>e<=.1?"good":e<=.25?"adequate":"poor",ee=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&ee(e.parentNode)||null,et=e=>Math.round(1e3*e),er=[],ea=e=>{let t=Object.freeze({}),r=0;er.forEach(({value:e,shift:{sources:a},route:i,params:n,hadRecentNavigation:o,hadRecentScroll:s,isAuth:l})=>{if(r+=e,!a||!a.length)return;let c=e/a.length;a.forEach(({node:e})=>{let r=e?ee(e)||"ROOT":"NODE_REMOVED",a={route:i,searchScope:n&&n.scope?n.scope:"none",boundaryId:r,hadRecentNavigation:o,hadRecentScroll:s,isAuth:l,domain:(0,j.xR)(document.domain||"unknown")},d=JSON.stringify(a);t={...t,[d]:{score:((t[d]||{}).score||0)+c,tags:a}}})}),Object.keys(t).forEach(r=>{let{score:a,tags:i}=t[r];(0,f.QX)(`${e}.shifts`,et(a),{sampleRate:1,tags:{...i}}),(0,f.LY)(`${e}.shifts`,et(a),{sampleRate:1,tags:{...i}})}),K("Debug CLS boundaries",r,t,er),er=[]},ei=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:r})=>{let a;let i=(0,R.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e}),n=0,o=e=>{n=e.timeStamp};window.addEventListener("scroll",o),window.addEventListener("beforeunload",()=>{window.removeEventListener("scroll",o)});let s=`${M(e)}.CLS`,l=()=>ea(s),c=0,d=0,u=0;(0,L.mw)(({entries:i,value:o})=>{if(u=o||0,i.length){let{path:s,params:l}=t();a=r();let u=i[0].startTime,p=c!==u,m=p?i:i.slice(d);p&&(c=u),er=er.concat(m.map(t=>({value:o,shift:t,route:s,params:l,hadRecentNavigation:a>0&&a+500>t.startTime,hadRecentScroll:n>0&&n+500>t.startTime,isAuth:e.isAuthenticated}))),d=i.length}},!0);let p=setInterval(()=>{if(er.length){l();let e=Q(u);(0,f.QX)(`${s}.${e}`,1,{sampleRate:1}),(0,f.LY)(`${s}.${e}`,1,{sampleRate:1}),i.stop(et(u))}},1e3);window.addEventListener("beforeunload",()=>{clearInterval(p),0===u&&i.abort("no_shifts_detected")})};var en=r(591048);let eo=()=>{(0,I.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach(e=>{window.performance[e]||(0,I.A9)(`not_supported.window.performance.${e}`)}):(0,I.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,I.A9)("not_supported.window.PerformanceObserer"),(0,D.v)()||(0,I.A9)("not_supported.grid_profiler")},es=()=>window.performance?.now?window.performance.now():null,el=e=>["/advertiser/"].reduce((t,r)=>e.includes(r)||t,!1);function ec({children:e,immutableLocation:t,routerHistoryAction:r,staticContext:i}){let n=(0,_.useRef)(null),o=(0,_.useRef)(null),s=(0,_.useRef)(t),l=(0,_.useRef)(!0),{path:c,params:u}=(0,a.$B)(),p=(0,_.useRef)(c),m=(0,_.useRef)(u),h=(0,A.Z)(i.deviceType);if("control"===i.getExperimentGroup("web_perf_logger_v4")&&(h?(0,I.A9)("supportedPWTBrowser",{tags:{deviceType:i.deviceType}}):(0,I.A9)("unsupportedPWTBrowser",{tags:{deviceType:i.deviceType}})),l.current&&(0,X.ZP)(!0,i.serverData?.trace_id),(0,_.useEffect)(()=>{p.current=c},[c]),(0,_.useEffect)(()=>{m.current=u},[u]),(0,_.useEffect)(()=>{if((0,en.X_)(),(0,O.UQ)(),eo(),l.current=!1,h&&!C.is&&"Chrome"===i.browserName){ei({staticContext:i,getCurrentRoute:()=>({path:p.current,params:m.current}),getLastNavigationTime:()=>o.current||0});let e=(0,S.e)(p.current);e&&Y({pwtStaticContext:i,surface:e,getCurrentRoute:()=>({path:p.current})})}},[]),el(t.pathname)?s.current.pathname!==t.pathname:s.current!==t){s.current=t,o.current=es();let{current:e}=o;if(!l.current){let t=!n.current;(0,I.A9)("routeStart",{tags:{action:r}}),(0,en.Eg)(t),(0,O.Ux)(t),(0,O.on)(),(0,J.tl)(),(0,X._T)(),(0,X.ZP)(!1);let{defaultBufferSize:a}=(0,en.LH)();e&&((0,I.A9)("routeStart.defaultBufferSize",{count:a}),n.current={time:e,action:r})}}return(0,d.jsx)(N.Z.Provider,{value:h?i:null,children:(0,d.jsx)(Z.Z.Provider,{value:n.current,children:e})})}var ed=r(712655),eu=r(417394),ep=r(23641);function em({children:e,immutableLocation:t,routerHistoryAction:r}){if((0,ed.Z)())return function({children:e,immutableLocation:t,routerHistoryAction:r}){let a=(0,_.useRef)(!0),i=(0,_.useRef)(!1),n=(0,_.useRef)(!1),o=(0,_.useRef)(t),s=performance.now();return i.current=i.current||el(t.pathname)?o.current.pathname!==t.pathname:o.current!==t,i.current&&!n.current&&((0,eu.yh)(),n.current=!0),(0,_.useLayoutEffect)(()=>{if((el(t.pathname)?o.current.pathname!==t.pathname:o.current!==t)||a.current){o.current=t;let e=a.current?0:s;(0,eu.ep)(r,e,a.current),(0,ep.Nx)("NavigationCompletev4"),a.current=!1,i.current=!1,n.current=!1}},[a,r,t,s,i]),e}({children:e,immutableLocation:t,routerHistoryAction:r})}var eh=r(57887),e_=r(418282);function ef({children:e,traceLoggerData:t}){let r=(0,p.B)(),i=(0,a.k6)(),o=(0,a.TH)(),s=!1;s=!0===e_.ZP.getItem(n.jO),e_.ZP.removeItem(n.jO);let l=(0,x.Z)({requestContext:r,traceLoggerData:t,isForcedReload:s});return((0,I.iF)(i.action),r.experimentsClient.checkExperiment("web_perf_logger_v4").anyEnabled)?(0,d.jsx)(ec,{immutableLocation:o,routerHistoryAction:i.action,staticContext:l,children:(0,d.jsx)(em,{immutableLocation:o,routerHistoryAction:i.action,children:e})}):(0,d.jsx)(ec,{immutableLocation:o,routerHistoryAction:i.action,staticContext:l,children:e})}function eg({children:e,context:t,copytuneExperiments:r,inContextTranslation:a,requestContext:n,resourceCreator:l,traceLoggerData:c}){return(0,d.jsx)(i.E,{value:t,children:(0,d.jsx)(ef,{traceLoggerData:c,children:(0,d.jsx)(u,{children:(0,d.jsx)(h,{children:(0,d.jsx)(s.Z,{children:(0,d.jsx)(T.Z,{copytuneExperiments:r,enableInContextTranslation:a,locale:n.locale,children:(0,d.jsx)(P.nK,{children:(0,d.jsx)(y.g,{children:(0,d.jsx)(b,{children:(0,d.jsx)(k.G,{children:(0,d.jsx)(o.Ih,{children:(0,d.jsx)(E.D,{children:(0,d.jsx)(eh.UZ,{resourceCreator:l,children:e})})})})})})})})})})})})})}},301538:function(e,t,r){let a,i;r.d(t,{Ch:()=>v,ZP:()=>D,cA:()=>x,li:()=>I,a:()=>S,nc:()=>C});var n=r(172045),o=r(430037),s=r(27399),l=r(11442),c=r(71133),d=r(746868),u=r(997776),p=r(730056),m=r(424868),h=r(907049),_=r(762693),f=r(767415);let g=new Set([6945,170,3700]),w=new Set([3700]),v={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},y=[4700,4701,4702,4703,7042,7043],b=e=>(0,u.Z)(JSON.stringify(e)),P=e=>t=>t.view_type===e.viewType&&t.view_parameter===e.viewParameter&&t.event_type===e.eventType&&t.object_id_str===e.objectIdStr&&(0,h.Z)(t.view_data,e.viewData),T=e=>g.has(e),E=e=>!T(e)||T(e)&&w.has(e);function k(){let e=new Date;a?a&&a.getUTCDate()!==e.getUTCDate()&&(a=e,(0,l.Z)()):a=e}let x=e=>{let t=e.event_type,r=y.includes(t),a=(0,d.BE)();return!!r||13===t||!!a},I=(e,t)=>{let r=e.event_type,a=y.includes(r),i=(0,d.BE)();return a?e:13===r&&e.view_type?(t?.({viewType:e.view_type,viewParameter:e.view_parameter,viewData:i?.viewData?p.Z(i.viewData,e.view_data):e.view_data}),e):!i||e.view_type&&e.view_parameter?e:{...e,view_type:i.viewType||e.view_type,view_parameter:i.viewParameter,view_data:e.view_data?(0,p.Z)(e.view_data,i.viewData):i.viewData}},A=e=>{let t={};return e?.storyPinProductEventData&&(t={...t,storyPinProductEventData:e.storyPinProductEventData}),t},C=(e,t)=>{let{component:r,element:a}=e,i=e.object_id_str,n=e.view_type,o=e.event_type,{appState:s}=e;return(e.event_data?.[t]||[]).map(l=>({auxData:e.aux_data,...r?{component:r}:{},eventData:l,...o?{eventType:o}:{},...n?{viewType:n}:{},viewData:e.view_data,viewParameter:e.view_parameter,...i?{objectIdStr:i}:null,impressionType:t,...A(e.event_data),appState:s,...a?{element:a}:{}}))??[]},S=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function D(){let e=[],t=[],r=0,a=!1;function l(){return[...e,...t.reduce((e,t)=>{let r=e.find(P(t));if(r&&!T(t.eventType))t.impressionType in r.event_data?r.event_data[t.impressionType].push(t.eventData):r.event_data[t.impressionType]=[t.eventData];else{let r=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},a={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,n.Z)(),component:t.component,event_data:{...r,[t.impressionType]:E(t.eventType)?[t.eventData]:{...t.eventData,...(t.eventData||{})[t.impressionType]}},event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,c.Z)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(a)}return e},[])]}function d({error:e,isError:t,isDroppedEvent:r,isImpression:a}){let i;let n=(0,o.Z)(),s=n?.userAgent||{},l=!(s.isMobile||s.isTablet),c={error_message:e?.message??"unknown",appType:l?"WEB_DENZEL":"WEB_MOBILE",country:n?.country??"unknown",browserName:s.browserName,osName:s.osName,browserType:s.browserType,browserVersion:s.browserVersion,isError:t,isImpression:a};i=r?"dropped":t?"errors":"success",(0,f.nP)(`webapp.metrics.contextLog.indexdb.${i}`,{tags:c})}async function u(){try{await i?.clear()}catch(e){d({isError:!0,error:{message:"Error while clearing cache",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}function p(){e=[],t=[],r=0}async function h(e){try{let t={...e,cache_created_time:(0,c.Z)(),isImpression:!1,aux_data:{...e.aux_data,is_context_cached:!0}};await i?.setItem(n.Z(),t)}catch(e){d({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function g(e){try{let t={...e,cache_created_time:(0,c.Z)(),isImpression:!0,auxData:{...e.auxData,is_impression_cached:!0}};await i?.setItem(n.Z(),t)}catch(e){d({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function w(){let e=l(),t=0,r=1e3;if(!e.length)return;let a=s.Z.create("ApiCResource",{events:e,report_time:(0,c.Z)()}),i=async()=>{try{await a.callCreate({async:!0,showError:!1}),u()}catch(n){let a=!n?.api_error_code||[m.dO,m.cZ,m.i1].includes(n.api_error_code);if(!function({retryAttempts:e,error:t,events:r}){let a=(0,o.Z)(),i=a?.userAgent||{},n=!(i.isMobile||i.isTablet),s={error_code:t?.api_error_code??"unknown",retryAttempts:e,appType:n?"WEB_DENZEL":"WEB_MOBILE",country:a?.country??"unknown",browserName:i.browserName,eventSize:r.length,osName:i.osName,browserType:i.browserType,browserVersion:i.browserVersion};(0,f.nP)("metrics_quality_web_retry_error_log",{tags:s})}({retryAttempts:t,error:n,events:e}),a&&t<5){let e=r;t+=1,r*=2,setTimeout(i,e)}else u()}};i(),p(),k()}function v(e=!1){let t=l();if(t.length){if(!e||a){w();return}s.Z.create("ApiCResource",{events:t,report_time:(0,c.Z)()}).callCreate({async:!e,showError:!1}),u(),p(),k()}}async function y(){try{(await i?.getAllItem()||[]).forEach(r=>{let{value:a}=r,{cache_created_time:i,isImpression:n,...o}=a;(0,c.Z)()-i>864e11?d({isDroppedEvent:!0,isError:!1}):n?(t.push(o),d({isImpression:!0,isError:!1})):(e.push(o),d({isError:!1}))}),v(!1),u()}catch(e){d({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}return{flushContextEvents:v,getContextEvents:l,logContextEvent:function({object_id_str:t,...a}){let i=(0,c.Z)(),o={aux_data:{},event_data:{},view_data:{},...a,time:i,clientUUID:(0,n.Z)(),...t?{object_id_str:t}:null};o.aux_data=function(e){if(!e)return e;let{element:t,eventData:r,component:a,objectId:i,view:n,viewParameter:o,viewData:s,durationNs:l,pairId:c,clientTrackingParams:d,...u}=e;return u}(o.aux_data),r+b(o)>20480&&v(!1),e.push(o),r+=b(o),k(),h(o)},logImpression:function(e){r+b(e)>20480&&v(!1),t.push(e),r+=b(e),g(e)},resetEventsBuffer:p,flushContextEventsV2:w,syncCachedEndEvents:y,_getIndexDBInstance:function(){return i},initiateIndexDBCache:function(){window?.indexedDB&&(i=i||new _.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))},_setContextLogSyncExpStatus:function(e){a=e??!1}}}},71133:function(e,t,r){r.d(t,{Z:()=>i,s:()=>a});let a=()=>{let e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},i=()=>1e6*Date.now()},325473:function(e,t,r){r.d(t,{Z:()=>i});var a=r(667294);let i=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e}},217095:function(e,t,r){r.d(t,{Z:()=>c,o:()=>l});var a=r(883119),i=r(351736),n=r(774838),o=r(739405),s=r(785893);let l=e=>({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[e]??"default";function c({children:e}){let t=(0,i.vs)(),r=(0,o.HG)(),{locale:c}=(0,n.B)(),d=l(c);return(0,s.jsx)(a.Ag,{colorScheme:t&&!r?"dark":"light",children:(0,s.jsx)(a.Ho,{languageMode:d,children:(0,s.jsx)(a.Ho,{forceTheme:"classic",languageMode:d,rootSelector:"excludeFromGridRepTests",children:e})})})}},863357:function(e,t,r){r.d(t,{Z:()=>o});var a=r(966502),i=r(470967),n=r(900946);function o(e,t){let r=Math.round(1e3*Math.random())+"",o=Math.round(1e3*Math.random())+"";i.t8((0,a.GS)(r),o);let s={token:`${r}-${o}`,url:e,...t&&!t.params?t.queryParams:t?.params&&{pin:t.params.pinId??void 0,isThirdPartyAd:t.params.isThirdPartyAd??void 0,csr:t.params.csrId&&!t.params.pinId?t.params.csrId:void 0,client_tracking_params:t.params.clientTrackingParams,aux_data:t.params.auxData?JSON.stringify(t.params.auxData):void 0}};return`/offsite/?${(0,n.Z)(s)}`}},241649:function(e,t,r){r.d(t,{Z:()=>o});var a=r(681698),i=r(647908),n=r(487038);let o=async({clientTrackingParams:e,href:t,isMounted:r,pinId:o,spamCheckCallback:s})=>{let l=await function(e){let t=(0,i.Z)(e),r=n.y8.get("ApiResource",t);if(r)return r;let o=(0,a.Z)(e);return n.y8.add("ApiResource",t,o),o}({url:"/v3/offsite/",data:{check_only:!0,client_tracking_params:e,pin_id:o,url:t}});if(!l.resource_response.error&&r){let{message:e,redirect_status:t,url:r}=l.resource_response.data||{};s({blocked:["blocked","suspicious","porn"].includes(t),message:e,redirectStatus:t,sanitized_url:r})}}},369236:function(e,t,r){r.d(t,{Z:()=>a});function a({isOffsiteUrl:e,event:t}){return!e&&(t.metaKey||t.ctrlKey)}},327670:function(e,t,r){r.d(t,{Z:()=>c});var a=r(505633),i=r(327569);let n=e=>"string"!=typeof e&&e?e.state:null;var o=r(483635),s=r(49629),l=r(43861);let c=({event:e,onHistoryChange:t,href:r,history:c,target:d})=>{let u=(0,i.Z)(r),p=n(r)??{},m=(0,o.Z)(u);m===l.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===d?(0,a.Z)(u,"blank"===d):c&&m===l.Z.SAME_ORIGIN&&(c.push((0,s.Z)({url:u}),{from:c.location,...p}),t&&t({event:e}))}},711846:function(e,t,r){r.d(t,{Z:()=>n});var a=r(505633),i=r(863357);function n(e,t){(0,a.Z)((0,i.Z)(e,t),!0,t?.features)}},460219:function(e,t,r){r.d(t,{Z:()=>i});var a=r(568710);function i({location:e,pinId:t,surface:r}){return!!r&&!a.ZF.includes(r)||e.pathname.includes(t)}},680391:function(e,t,r){r.d(t,{Z:()=>_});var a=r(667294),i=r(616550),n=r(325473),o=r(241649),s=r(369236),l=r(327670),c=r(460219),d=r(201466),u=r(327569),p=r(748336),m=r(862893),h=r(767415);function _(e){let{clientTrackingParams:t,externalData:r,href:_,onHistoryChange:f,target:g}=e,[w,v]=(0,a.useState)(null),y=(0,n.Z)(),b=(0,i.k6)(),P=(0,i.TH)(),T=(0,u.Z)(_),E=(0,p.Z)({url:T}),{showWarning:k}=(0,m.s)()??{},{pin:x,surface:I}=r||{},A=t||x?.trackingParams,C=(0,d.Z)();return(0,a.useEffect)(()=>{E&&x&&null===w&&y&&(!x.promoter||x.isDownstreamPromotion)&&(0,c.Z)({location:P,pinId:x.entityId,surface:I})&&(0,o.Z)({clientTrackingParams:A,isMounted:y,pinId:x.entityId,spamCheckCallback:e=>v(e),href:T})},[A,x,I,T,E,y,P,w]),({event:e})=>{if(!(0,s.Z)({isOffsiteUrl:E,event:e})){if(e.preventDefault(),!_||"string"==typeof _&&_.startsWith("#")){(0,h.nP)("link_navigation_empty_href",{sampleRate:1,tags:{route:P.pathname,href:_}});return}E||r?.dangerouslyForceOffsiteUrl?C({auxData:r?.auxData,clientTrackingParams:A,pin:r?.pin&&{attributionSourceId:r.pin.attributionSourceId,campaignId:r.pin.campaignId,isPromoted:r.pin.isPromoted,pinPromotionId:r.pin.pinPromotionId,isThirdPartyAd:r.pin.isThirdPartyAd,advertiserId:r.pin.advertiserId,destinationUrl:r.pin.destinationUrl,link:r.pin.link,domain:r.pin.domain},pinId:r?.pin?.entityId,queryParams:r?.queryParams,showWarning:k,spamCheck:w,url:T}):(0,l.Z)({event:e,href:_,history:b,onHistoryChange:f,target:"blank"===g?"blank":null})}}}},201466:function(e,t,r){r.d(t,{Z:()=>_});var a=r(430037),i=r(465989),n=r(763538),o=r(343669),s=r(505633),l=r(230201),c=r(863357),d=r(711846),u=r(594774);let p=(e,t,r)=>{let a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("target","_blank"),a.setAttribute("rel","noopener nofollow noreferrer"),a.style.cursor="pointer",a.style.display="block",a.setAttribute(i.$N.ATTRIBUTION_SOURCE_ID,e),a.setAttribute(i.$N.ATTRIBUTE_DESTINATION,r),a.setAttribute(i.$N.ATTRIBUTE_ON,r),a.click()},m=(e,t,r,a,o,s,l)=>{let c=(0,n.m_)(e,[r,a,o],!0,s,l),d=document.createElement("a");d.setAttribute("href",t),d.setAttribute("target","_blank"),d.setAttribute("rel","noopener nofollow noreferrer"),d.style.cursor="pointer",d.style.display="block",d.setAttribute(i.NR.SOURCE,c),d.click()},h=()=>{let{logContextEvent:e}=(0,l.v)();return({attributionSourceId:t,auxData:r,campaignId:i,clientTrackingParams:n,href:s,isPromoted:l,pinId:d,pinPromotionId:u,isThirdPartyAd:h,advertiserId:_,destinationUrl:f,link:g,domain:w})=>{if(!l)return!1;let v=(0,a.Z)(),y={params:{pinId:d,csrId:null,clientTrackingParams:n,auxData:r,isThirdPartyAd:h}},b=(0,c.Z)(s,y);v?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&l&&s===f&&(fetch((0,c.Z)(f,y),{redirect:"manual"}),b=f);let P=v?.userAgent.browserName??"";if((0,o.G6)(P)){let r=v?.userAgent.browserVersion?v.userAgent.browserVersion:"0.0",a=parseFloat(r.split(".")[0]+"."+r.split(".")[1]);if(t&&a>=14.1)return p(t,b,s),e({event_type:101,clientTrackingParams:n,object_id_str:d||"",aux_data:{pin_id:d||"",click_measurement_ppid:u||"",click_measurement_campaign_id:i||"",is_pcm:!0,attribution_source_id:t,page_url:s}}),!0}else if((0,o.i7)(P)&&window.document.featurePolicy?.allowsFeature("attribution-reporting"))return m(t,b,f,g,w,i,_),e({event_type:101,clientTrackingParams:n,object_id_str:d||"",aux_data:{pin_id:d||"",click_measurement_ppid:u||"",click_measurement_campaign_id:i||"",is_arapi:!0,attribution_source_id:t,page_url:s}}),!0;return!1}},_=e=>{let t=h();return({auxData:r,clientTrackingParams:i,pin:n,pinId:o,queryParams:l,showWarning:p,spamCheck:m,url:h})=>{if("undefined"!=typeof window&&window.Windows){(0,u.Z)(h,{clientTrackingParams:i,pinId:o,hasPin:!!n,auxData:r,isThirdPartyAd:n?.isThirdPartyAd});return}if(!n&&!e?.isFromClickthroughLink){(0,d.Z)(h,l?{queryParams:l}:{params:{pinId:o}});return}if(m?.blocked){p?.(m);return}if(n&&t({attributionSourceId:n.attributionSourceId,auxData:r,campaignId:n.campaignId?String(n.campaignId):null,clientTrackingParams:i,href:h,isPromoted:n.isPromoted,pinId:o,pinPromotionId:n.pinPromotionId?String(n.pinPromotionId):null,isThirdPartyAd:n.isThirdPartyAd,advertiserId:n.advertiserId?n.advertiserId:null,destinationUrl:n.destinationUrl,link:n.link,domain:n.domain}))return;let _={params:{clientTrackingParams:i,auxData:r,pinId:o,isThirdPartyAd:n?.isThirdPartyAd}},f=(0,a.Z)();if(f?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&n?.isPromoted&&h===n?.destinationUrl){fetch((0,c.Z)(h,_),{redirect:"manual"}),(0,s.Z)(h,!0);return}(0,d.Z)(h,_)}}},169166:function(e,t,r){r.d(t,{Z:()=>a});let a=(0,r(667294).createContext)(null)},506807:function(e,t,r){r.d(t,{Z:()=>a});let a=(0,r(667294).createContext)(null)},398006:function(e,t,r){r.d(t,{Jx:()=>I,ku:()=>S,PY:()=>C});var a=r(774303),i=r(705460),n=r(426035),o=r(381571),s=r(827039),l=r(449896),c=r(192496),d=r(648447);let u=()=>(0,d.PJ)().reduce((e,{identifier:t,loadTime:r,renderTime:a})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:r,[`${t}_dupe_renderTime`]:a}:e:{...e,[`${t}_loadTime`]:r,[`${t}_renderTime`]:a},Object.freeze({}));var p=r(649324),m=r(525939),h=r(591048);let _=e=>{let t=(0,h.y0)();return e.reduce((e,{name:r,match:a})=>t.filter(e=>a(e)).slice(0,2).reduce((e,t,a)=>({...e,...(0,s.jh)(`${r}${a?"_dupe1":""}_`,(0,p.Z)(t))}),e),Object.freeze({}))},f=e=>{if("pin_closeup"===e){let e=(0,m.Z)();return _([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}return{}};var g=r(780764),w=r(217472),v=r(337751),y=r(662896),b=r(679767),P=r(240083),T=r(296264);let E=(0,a.XV)("LightStopwatch"),k=()=>{let e=[],t=null;return window.PerformanceObserver&&(t=(0,b.Z)({entryTypes:["resource"]},t=>{(e=e.concat(t.getEntries())).length>1e3&&(e=e.slice(-1e3))})),{get:()=>e,disconnect:()=>{t&&t.disconnect()}}},x={},I=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:r,name:a,pwtStaticContext:d})=>{let p=k(),m=(0,y.Z)(d.fullPath),h=!0,_={...m?{pagePath:{value:m,type:"STRING"}}:{}},b=(0,o.jf)();(0,i.A9)(`TIMING.${a}`,{tags:{isAuth:d.isAuthenticated}});let I={type:"stopwatch",name:a,navigationType:"initial_app_load",isAuthenticated:d.isAuthenticated,surface:""},A={abort:m=>{if(!h){(0,i.H)("duplicate_abort_action",{action:a});return}h=!1;let y=(0,P.Z)(),E=(0,c.Z)(),k=p.get(),x={reason:m,type:"ABORT",traceId:b,startTime:0,endTime:T.Z?.now()||0,spans:[{name:"network_resources",id:y,startTime:0,endTime:T.Z?.now()||0,annotationMap:{},binaryAnnotationMap:{},parentId:null},...k.map(e=>(0,v.Z)((0,g.p)(e,[]),y)).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",r?f(r):{}),...(0,s.jh)("element_",u()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,n.gQ)(),t):{}),...(0,s.jh)("browser_",E?(0,s.D3)(E):{})},binaryAnnotationMap:(0,l.ng)({annotateExperiments:e,metricId:I,pwtStaticContext:d,performanceResourceTimings:k,binaryAnnotations:_,type:"ABORT"})};(0,w.Z)({metricId:I,pwtStaticContext:d,result:x,isAuth:d.isAuthenticated}),(0,o.$B)()},error:(e,t)=>{let r={...t,action:a};if(!h){(0,i.H)("duplicate_error_action",r);return}e&&(0,i.H)(e,r),p&&p.disconnect(),h=!1,(0,o.$B)()},stop:m=>{if(!h){(0,i.H)("duplicate_stop_action",{action:a});return}h=!1,p.disconnect();let y=(0,P.Z)(),T=(0,c.Z)(),E=p.get(),k={type:"COMPLETE",traceId:b,startTime:0,endTime:m,spans:[{name:"network_resources",id:y,startTime:0,endTime:m,annotationMap:{},binaryAnnotationMap:{},parentId:null},...E.map(e=>(0,v.Z)((0,g.p)(e,[]),y)).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",r?f(r):{}),...(0,s.jh)("element_",u()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,n.gQ)(),t):{}),...(0,s.jh)("browser_",T?(0,s.D3)(T):{})},binaryAnnotationMap:(0,l.ng)({annotateExperiments:e,metricId:I,pwtStaticContext:d,performanceResourceTimings:E,binaryAnnotations:_,type:"COMPLETE"})};(0,w.Z)({metricId:I,pwtStaticContext:d,result:k,isAuth:d.isAuthenticated}),(0,o.$B)()},addBinaryAnnotation:(e,t,r)=>{E(`adding binary annotation {${e}: ${String(t)}}`),_={..._,[e]:{value:t,type:r}}}};return x[a]=A,A},A=e=>x[e],C=e=>!!A(e),S=({stopwatchName:e,binaryAnnotationName:t,value:r,annotationType:a})=>{let i=A(e);i&&i.addBinaryAnnotation(t,r,a)}},525939:function(e,t,r){r.d(t,{Z:()=>i,f:()=>a});let a="closeupImage",i=()=>{if(!document.querySelector)return null;let e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},762693:function(e,t,r){r.d(t,{Z:()=>a});class a{constructor(e,t="myDatabase",r="myStore"){var a,i,n;a="cache",i=new Map,(a="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?n:n+"")in this?Object.defineProperty(this,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[a]=i,this.dbName=t,this.storeName=r,this.dbPromise=(async()=>{try{return await this.initializeDB(e)}catch{return null}})()}async initializeDB(e){return new Promise((t,r)=>{try{let a=e.open(this.dbName,1);a.onerror=()=>{r(Error("IndexedDB initialization error: "+a.error))},a.onupgradeneeded=()=>{let e=a.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName,{keyPath:"key"})},a.onsuccess=()=>{t(a.result)}}catch(e){r(Error("IndexedDB initialization error: "+e))}})}async reopenDatabaseIfClosed(){let e=await this.dbPromise;return e&&!e.close?e:(this.dbPromise=this.initializeDB(window.indexedDB),this.dbPromise)}async getObjectStore(e="readwrite"){let t=await this.reopenDatabaseIfClosed();return t?t.transaction(this.storeName,e).objectStore(this.storeName):null}async getItem(e){if(this.cache.has(e))return this.cache.get(e)||null;let t=await this.getObjectStore();return t?new Promise((r,a)=>{let i=t.get(e);i.onerror=()=>a(i.error),i.onsuccess=()=>{let t=i.result?.value||null;null!==t&&this.cache.set(e,t),r(t)}}):null}async getAllItem(){let e=await this.getObjectStore();return e?new Promise((t,r)=>{let a=e.getAll();a.onerror=()=>r(a.error),a.onsuccess=()=>{a.result?.forEach(e=>{this.cache.set(e.key,e.value)}),t(a.result)}}):null}async setItem(e,t){this.cache.set(e,t);let r=await this.getObjectStore();return r?new Promise((a,i)=>{let n=r.put({key:e,value:t});n.onerror=()=>{i(n.error)},n.onsuccess=()=>{a(null)}}):null}async removeItem(e){this.cache.delete(e);let t=await this.getObjectStore();return t?new Promise((r,a)=>{let i=t.delete(e);i.onerror=()=>a(i.error),i.onsuccess=()=>r(null)}):null}async clear(){this.cache.clear();let e=await this.getObjectStore();return e?new Promise((t,r)=>{let a=e.clear();a.onerror=()=>r(a.error),a.onsuccess=()=>t(null)}):null}}},209045:function(e,t,r){let a;r.d(t,{w:()=>_});var i=r(430037),n=r(71133),o=r(762693),s=r(141483),l=r(629724),c=r(767415);function d(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let u=null,p={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},m=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"",h=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function _({contextLogger:e,webDeliverabilityAppTimedPairEnabled:t=!1}){if(a||(a=window?.indexedDB?new o.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),u)return u;let r=new Map,_=(0,l.Z)()&&(0,l.Z)().debug_timespent,f=[],g=_?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};return console.group||(g.group=(...e)=>console.log(...e),g.groupEnd=(...e)=>{}),u=new class{constructor(){d(this,"appTimedPair",null),d(this,"clickthroughProperties",null),d(this,"historyStackContext",null),d(this,"offsiteTimedPair",null),d(this,"offsiteTimedPairForegroundId",null),d(this,"pins",Object.freeze({})),d(this,"addEventListeners",()=>{let{hidden:e,visibilityChange:t}=(0,n.s)(),r=async t=>{document[e]?await this.unregisterApp(!1,void 0,t):await this.registerApp()};t&&document.addEventListener(t,r,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",async e=>await this.unregisterApp(!1,void 0,e));let a=h(async e=>await this.unregisterApp(!0,void 0,e));window.addEventListener("beforeunload",a),window.addEventListener("pagehide",a);let i=navigator&&navigator.userAgent.toLowerCase();i&&i.includes("macintosh")&&i.includes("chrome")&&window.addEventListener("popstate",()=>{document.hasFocus()||document[e]||(0,c.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),d(this,"storeClickthroughProperties",e=>{this.clickthroughProperties&&(0,c.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),this.clickthroughProperties={time:(0,n.Z)(),...e}}),d(this,"clearClickthroughProperties",()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null}),d(this,"registerApp",async()=>{g.group("App Foreground",m()),null==this.appTimedPair?(this.appTimedPair=new s.Z,this.appTimedPair.start(),this._unpauseAllComponents(),await this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&(e.logContextEvent({event_type:4700,pair_id:this.appTimedPair.uuid}),t&&await this._addAppTimerToIndexDB({foregroundAppTimerUUID:this.appTimedPair.uuid,timeCreated:this.appTimedPair.startTime}))):g.error("TimedPair already exists for app."),g.groupEnd()}),d(this,"logIndexDbStatLog",({error:e,isError:t,isDroppedEvent:r,isAppTimedPair:a})=>{let n;let o=(0,i.Z)(),s=o?.userAgent||{},l=!(s.isMobile||s.isTablet),d={error_message:e?.message??"unknown",appType:l?"WEB_DENZEL":"WEB_MOBILE",country:o?.country??"unknown",browserName:s.browserName,osName:s.osName,browserType:s.browserType,browserVersion:s.browserVersion,isError:t,errorName:e?.errorName??"unknown",errorDetails:e?.details??"unknown",errorStackTrace:e?.stack_trace??"unknown",isAppTimedPair:a??"unknown"};n=r?"dropped":t?"errors":"success",(0,c.nP)(`webapp.metrics.timespent.indexdb.${n}`,{tags:d})}),d(this,"unregisterApp",async(r=!1,a=!1,i)=>{g.group("App Background",m());let{appTimedPair:n}=this;if(null!=n){this._pauseAllComponents();let r=n.end();this._startOffsiteTimedPair();let a=n.uuid;e.logContextEvent({event_type:4701,duration_ns:r,pair_id:a}),this.appTimedPair=null,t&&await this._removeAppTimerFromIndexDB({foregroundAppTimerUUID:a})}else g.error("No TimedPair found for app.");let o=["beforeunload","pagehide"],s=o.includes(i?.type),l=o.includes(i?.pauseReason);(s||l)&&await this._endOffsiteTimedPair(),a||e.flushContextEvents(r??!1),g.groupEnd()}),d(this,"_activateComponent",t=>{g.group("Activating component",m()),_&&g.log(t.getContext());let r=t.getTimedPair();if(r){r.start();let{view:a,viewParameter:i,component:n,element:o,objectId:s,clientTrackingParams:l}=t.getLoggerContext();e.logContextEvent({event_type:4702,view_type:a,view_parameter:i,component:n,element:o,object_id_str:s,view_data:t.props.viewData,pair_id:r.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),d(this,"_deactivateComponent",t=>{g.group("Deactivating component",m()),_&&g.log(t.getContext());let r=t.getTimedPair();if(r){let{view:a,viewParameter:i,component:n,element:o,objectId:s,clientTrackingParams:l}=r,c=r.end();e.logContextEvent({event_type:4703,view_type:a,view_parameter:i,component:n,element:o,object_id_str:s,view_data:t.props.viewData,duration_ns:c,pair_id:r.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),d(this,"_startOffsiteTimedPair",()=>{let{clickthroughProperties:t}=this;t&&(this.offsiteTimedPair=new s.Z({...t,view:186,viewParameter:t.view_parameter,objectId:t.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,t.aux_data={...t.aux_data,time_to_offsite:void 0!==t.time&&null!==t.time&&"number"==typeof t.time?(0,n.Z)()-t.time:void 0},e.logContextEvent({...t,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}),this._addOffSitePairToIndexDB({offsiteTimedPairUUID:this.offsiteTimedPair?.uuid,clickthroughProperties:t,timeCreated:this.offsiteTimedPair?.startTime,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId}))}),d(this,"_endOffsiteTimedPair",async()=>{let{offsiteTimedPair:t,clickthroughProperties:r}=this;if(t&&r){let a=t.end();e.logContextEvent({...r,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...r.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:a}),this._removeOffSitePairByIdFromIndexDB(this.offsiteTimedPair?.uuid),await this._syncCachedTimedPairEndEvents(),this._onOffsiteEnd(),this.clearClickthroughProperties()}else await this._syncCachedTimedPairEndEvents()}),d(this,"_addOffSitePairToIndexDB",async({offsiteTimedPairUUID:e,clickthroughProperties:t,timeCreated:r,offsiteTimedPairForegroundId:i})=>{try{await a?.setItem(e,{clickthroughProperties:{...t},timeCreated:r,offsiteTimedPairForegroundId:i})}catch(e){this.logIndexDbStatLog({isError:!0,isAppTimedPair:!1,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_addAppTimerToIndexDB",async({foregroundAppTimerUUID:e,timeCreated:t})=>{try{await a?.setItem(e,{isAppTimedPair:!0,timeCreated:t})}catch(e){this.logIndexDbStatLog({isError:!0,isAppTimedPair:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_removeAppTimerFromIndexDB",async({foregroundAppTimerUUID:e})=>{try{if(!e)return;await a?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,isAppTimedPair:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_removeOffSitePairByIdFromIndexDB",async e=>{try{if(!e)return;await a?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,isAppTimedPair:!1,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_syncCachedTimedPairEndEvents",async()=>{try{(await a?.getAllItem()||[]).forEach(async r=>{let{key:i,value:n}=r,{clickthroughProperties:o,timeCreated:l,offsiteTimedPairForegroundId:c,isAppTimedPair:d}=n,u=(0,s.h)(),p=l?u-l:null;l&&(0,s.h)()-l>864e11?this.logIndexDbStatLog({isDroppedEvent:!0,isError:!1,isAppTimedPair:d}):(t&&d?p&&p>0&&e.logContextEvent({event_type:4701,duration_ns:p,pair_id:i,aux_data:{is_timed_pair_cached:!0}}):e.logContextEvent({...o,event_type:4703,view_type:186,pair_id:i||null,aux_data:{...o?.aux_data,time_spent_foreground_pairid:c,is_timed_pair_cached:!0},duration_ns:p}),this.logIndexDbStatLog({isError:!1,isAppTimedPair:d})),t&&await a?.removeItem(i)}),t||await a?.clear()}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_onOffsiteEnd",()=>{g.group("Trigger onOffsiteEndCallbacks"),f.forEach(e=>e({appTimedPair:this.appTimedPair,clickthroughProperties:this.clickthroughProperties,offsiteTimedPair:this.offsiteTimedPair,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId})),g.groupEnd()}),d(this,"_pauseAllComponents",()=>{g.group("Pause all components"),r.forEach((e,t,r)=>{e===p.ACTIVE&&this._deactivateComponent(t),r.set(t,p.PAUSED)}),g.groupEnd()}),d(this,"_unpauseAllComponents",()=>{g.group("Unpause all components"),r.forEach((e,t)=>{let a=new s.Z(t.getLoggerContext());t.setTimedPair(a,()=>{r.set(t,p.ACTIVE),this._activateComponent(t)})}),g.groupEnd()})}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}startOffsiteRightClickTimedPair(t=!1){this._startOffsiteTimedPair(),t||e.flushContextEvents()}registerComponent(e){null===this.appTimedPair?r.set(e,p.PAUSED):(r.set(e,p.ACTIVE),this._activateComponent(e))}unregisterComponent(e){r.get(e)===p.ACTIVE&&(this._deactivateComponent(e),e.setTimedPair(new s.Z(e.getLoggerContext()))),r.delete(e)}size(){return r.size}onOffsiteEnd(e){f.push(e)}removeOnOffsiteEnd(e){let t=f.indexOf(e);t>-1&&f.splice(t,1)}_getIndexDBInstance(){return a}_getContextLogger(){return e}_clearTimeSpentManager(){u=null}}}},49629:function(e,t,r){r.d(t,{Z:()=>n});let a=(e,t)=>0===e.lastIndexOf(t,0);var i=r(755725);let n=({url:e})=>{let t=(0,i.Z)("/");return a(e,t)?e.substr(t.length-1):e}},594774:function(e,t,r){r.d(t,{Z:()=>n});var a=r(681698),i=r(711846);function n(e,t){let{auxData:r,clientTrackingParams:n,hasPin:o,pinId:s,isThirdPartyAd:l}=t||{},c={pin_id:s,check_only:!0,client_tracking_params:o?n:void 0,url:e,aux_data:JSON.stringify(r)};l&&(c.third_party_ad=s,delete c.pin_id),(0,a.Z)({url:"/v3/offsite/",data:c}).then(t=>{if(t&&t.resource_response&&!t.resource_response.error){let{resource_response:e}=t,{redirect_status:r,url:a}=e.data;if(!["blocked","suspicious","porn"].includes(r)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){let e=new window.Windows.Foundation.Uri(a);window.Windows.System.Launcher.launchUriAsync(e)}return}}(0,i.Z)(e,{params:o?{pinId:s,clientTrackingParams:n,auxData:r,isThirdPartyAd:l}:{pinId:s}})})}},568710:function(e,t,r){r.d(t,{Wv:()=>i,ZF:()=>a,zI:()=>n,zl:()=>o});let a=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],i=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],n=[...i,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","SearchAdsOnlyModule","ShoppingTool","ProductPinRetrieval"],o=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton"]},862893:function(e,t,r){r.d(t,{s:()=>_,Z:()=>f});var a=r(667294),i=r(213491),n=r(608575),o=r(883119),s=r(465784),l=r(138596),c=r(216975),d=r(785893);let u=()=>{let e=(0,l.ZP)(),{dismissWarning:t}=_()??{};return(0,d.jsx)(o.xu,{paddingX:3,children:(0,d.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,text:e.bt("Tamam", "Okay", "Dismiss a modal stating that clicking through to a link has been blocked", undefined, true)})})},p=()=>{let e=(0,l.ZP)();return(0,d.jsx)(o.xv,{inline:!0,weight:"bold",children:(0,d.jsx)(o.rU,{display:"inlineBlock",href:"https://policy.pinterest.com/community-guidelines#section-spam",target:"blank",underline:"hover",children:e.bt("Daha fazla bilgi edinin", "Learn more", "Link text leading to policy website", undefined, true)})})},m=({message:e,sanitized_url:t})=>{let r=(0,l.ZP)(),{dismissWarning:a}=_()??{};return(0,d.jsx)(s.ZP,{accessibilityModalLabel:r.bt("Bu bağlantıyı engelledik", "We have blocked this link", "Modal label when clicking a spammy link", undefined, true),footer:(0,d.jsx)(u,{}),heading:r.bt("Dikkat!", "Heads up!", "Modal heading when clicking through to a link has been blocked", undefined, true),onDismiss:a,children:(0,d.jsxs)(o.xu,{padding:6,children:[(0,d.jsx)(o.xv,{children:(0,c.nk)("{{ message }} {{ learnMore }}",{message:e,learnMore:(0,d.jsx)(p,{},"learnMoreLink")})}),(0,d.jsxs)(o.xu,{alignItems:"center",display:"flex",marginTop:4,children:[(0,d.jsx)(o.xu,{marginEnd:3,children:(0,d.jsx)(o.JO,{accessibilityLabel:r.bt("Engellenen bağlantı adresi", "Blocked link address", "Icon label preceding a block url", undefined, true),color:"error",icon:"report",inline:!0,size:24})}),(0,d.jsx)(o.xv,{inline:!0,lineClamp:1,weight:"bold",children:n.parse(t).hostname})]})]})})},{Provider:h,useMaybeHook:_}=(0,i.Z)("SpammyClickthrough");function f({children:e}){let[t,r]=(0,a.useState)(null),i=(0,a.useCallback)(()=>{r(null)},[r]),n=(0,a.useCallback)(e=>{r(e)},[r]),o=(0,a.useMemo)(()=>({dismissWarning:i,showWarning:n}),[i,n]);return(0,d.jsxs)(h,{value:o,children:[t&&(0,d.jsx)(m,{...t}),e]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/9414.tr-b2b00586618e8aa8.mjs.map