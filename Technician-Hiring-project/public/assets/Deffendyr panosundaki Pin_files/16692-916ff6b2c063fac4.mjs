"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["16692"],{731517:function(e,t,a){a.d(t,{Z:()=>n});var i=a(994193);async function n(e,t){let{api:a}=(0,i.t)(),n=(0,i.u)();try{n.attempt("getMultipleBizEntityProperties",t);let i=new Date().getTime(),s=await a.post("/ads/v4/business_entities",e,!1);return n.success("getMultipleBizEntityProperties",t),n.latency("getMultipleBizEntityProperties",new Date().getTime()-i,t),s}catch(e){throw n.failure("getMultipleBizEntityProperties",t),e}}(0,i.u)()},861241:function(e,t,a){a.d(t,{Z:()=>n});var i=a(994193);async function n(e,t){let{api:a}=(0,i.t)(),n=(0,i.u)();try{n.attempt("setMultipleBizEntityProperties",t);let i=new Date().getTime(),s=await a.patch("/ads/v4/business_entities",e,!1);return n.success("setMultipleBizEntityProperties",t),n.latency("setMultipleBizEntityProperties",new Date().getTime()-i,t),s}catch(e){throw n.failure("setMultipleBizEntityProperties",t),e}}(0,i.u)()},65711:function(e,t,a){a.d(t,{Z:()=>n});var i=a(462867);let n=()=>{let e=(0,i.Z)();return!!e.isAuth&&e.isPartner}},69406:function(e,t,a){a.d(t,{Oz:()=>i,mo:()=>r,nt:()=>s,v8:()=>n});let i={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE",CATALOG:"CATALOG"},n="BUSINESS_PANEL",s="ASSET_PANEL",r=500},800287:function(e,t,a){a.d(t,{lG:()=>R,FE:()=>T,d9:()=>B});var i=a(667294),n=a(616550),s=a(65711),r=a(684645),l=a(613567),u=a(462867),o=a(767415);let c=()=>{let e=(0,u.Z)(),{checkExperiment:t}=(0,l.F)(),a=(0,s.Z)()&&t("web_m10n_business_reporting_business_entity_service").anyEnabled,[n,c]=(0,i.useState)({isReady:!1}),d=(0,i.useCallback)(async({entityId:e,actingBusinessId:t,favorites:i})=>{a&&(await (0,r.yo)({entityId:e,actingBusinessId:t,favorites:i}),c(e=>{let a={...e,actingBusinessId:t};return i&&(a.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[i.actingBusinessId]:{advertiserId:i.adAccounts}}}),a}))},[a]);return(0,i.useEffect)(()=>{a&&e.isAuth&&!n.isReady&&(async()=>{let t=!1;try{let t=await (0,r.SF)({entityId:e.id});c(e=>({...e,...t}))}catch{t=!0}finally{(0,o.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:t}}),c(e=>({...e,isReady:!0}))}})()},[n.isReady,a,e]),{accountSwitcherConfig:n,setConfig:d}};var d=a(581722),m=a(387535),p=a(442279),_=a(498539);let f=(0,p.createSelector)(_.Z,({viewerIsProfileOwnerOrProfileManager:e})=>e??void 0);var g=a(200619),y=a(601871),A=a(414448);let h=()=>{let e=(0,u.Z)(),t=(0,i.useRef)(e);t.current=e;let a=(0,d.I0)(),n=(0,g.Z)(),s=(0,i.useRef)(n);s.current=n;let l=(0,d.v9)(f),o=l?.data||void 0,c=(0,i.useRef)(o);c.current=o,(0,i.useEffect)(()=>{(async()=>{if(t.current.isAuth&&void 0===l.data){let e=await (0,r.bG)({user_id:t.current.id});if(void 0!==e&&void 0===c.current){let i=(0,y.D3)(t.current,e?.id??"",s)||t.current.isAuth&&t.current.username===e?.username;a((0,m.Z)(!!i))}}})()},[t,c,a,s,l]);let p=(0,A.rc)(o);return{viewerIsProfileOwnerOrProfileManagerData:o,previousIsViewerProfileOwnerOrProfileManager:p}};var S=a(69406),w=a(230201),E=a(213491),N=a(173874),v=a(138482),b=a(575820),I=a(563218),C=a(131990),O=a(785893);let{Provider:U,useHook:B}=(0,E.Z)("AccountSwitcherContext"),R=e=>e.search&&(0,b.mB)(e.search).advertiserId,T=({children:e})=>{let t=(0,n.TH)(),{params:{userBizId:a,businessHierarchyId:o,advertiserId:d,username:m}}=(0,n.$B)(),{catalogId:p}=(0,C.Z)(),_=R(t),f=(0,u.Z)(),{viewerIsProfileOwnerOrProfileManagerData:g,previousIsViewerProfileOwnerOrProfileManager:y}=h(),{checkExperiment:E}=(0,l.F)(),b=E("web_m10n_business_access_catalogs").anyEnabled,[B,T]=(0,i.useState)(""),[P,L]=(0,i.useState)(null),[Z,z]=(0,i.useState)(!1),[M,F]=(0,i.useState)(null),G=new URLSearchParams(t.search),[D,H]=(0,i.useState)(G.has("actingBusinessId")?null:{id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||""}),[k,x]=(0,i.useState)(!1),W=(0,s.Z)(),{logContextEvent:j}=(0,w.v)(),{accountSwitcherConfig:q,setConfig:K}=c();(0,i.useEffect)(()=>{o?T(o):T("")},[o]);let Y=(0,i.useCallback)(async({id:e,username:t})=>{let a=await (0,r.bG)({user_id:e,username:t});a&&F({type:e?S.Oz.BUSINESS_ACCOUNT:S.Oz.PROFILE,id:e||a.id,name:a.full_name,img:a.image_medium_url,username:t,ownerImg:a.image_medium_url,ownerName:a.full_name,actingBusinessFullName:D?.name||a.full_name}),x(!1)},[D]),$=(0,A.rc)(m);(0,i.useEffect)(()=>{(0,v.Z)(t)&&M&&$!==m&&m===f.username&&(Y({username:f.username}),H({id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||""}),L({type:S.nt,id:f.id}))},[t,$,Y,M,m,f.fullName,f.id,f.imageMediumUrl,f.username]),(0,i.useEffect)(()=>{let e=async({businessId:e,assetId:a})=>{if(!e){x(!1);return}let i=b&&(0,N.Bg)(t)?"CATALOG":"AD_ACCOUNT";try{let e={asset:{name:""},type:i};if(f.isAuth){let{data:{data:t={[a]:e}}={}}=await (0,I.pI)({businessId:D?.id||f.id,assetIds:[a],resourceType:i})||{},{asset:n,type:s}=t[a]||e;F({id:a,name:"CATALOG"===i?t[a].owner.full_name:n.name,img:t[a].owner.image_medium_url,type:s,ownerImg:t[a].owner.image_medium_url,ownerName:t[a].owner.full_name,actingBusinessFullName:D?.name||t[a].owner.full_name})}}catch{F({id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||"",type:S.Oz.BUSINESS_ACCOUNT,ownerImg:f.imageMediumUrl||"",ownerName:f.fullName||"",actingBusinessFullName:f.fullName||""})}x(!1)},i=async({id:e})=>{let t=await (0,r.p)({hierarchyId:e});F({id:e,name:t?.data?t.data.name:"",img:t?.data?t.data.img_medium_url:"",type:S.Oz.BUSINESS_HIERARCHY,ownerImg:t?.data?t.data.img_medium_url:"",ownerName:t?.data?t.data.name:"",actingBusinessFullName:t?.data?t.data.name:""}),x(!1)};if(f.isAuth&&W){let n=M&&M.username&&M.username!==m,s=!0===g&&g!==y;if((!M||n||s)&&!k&&D){let n=(0,N.z6)(t)||(0,N.h3)(t),s=d||!!_&&!n||(0,N.Bg)(t)&&b;x(!0),o?i({id:o}):a?Y({id:a}):(0,v.Z)(t)&&m&&g?Y({username:m}):s?e({businessId:f.id,assetId:d||_||p||""}):M&&M.id===f.id||(F({type:S.Oz.BUSINESS_ACCOUNT,id:f.id||"",name:f.fullName||"",img:f.imageMediumUrl||"",ownerImg:f.imageMediumUrl||"",ownerName:f.fullName||"",actingBusinessFullName:f.fullName||""}),x(!1))}}},[M,f,o,a,m,d,_,D,W,t,Y,k,g,y,p,b]);let V=(0,i.useMemo)(()=>({activePanel:P,selectedHierarchyId:B,switcherOpen:Z,openAccountSwitcher:()=>{if(j({event_type:101,view_type:608,component:14346}),!P){if((0,N.z6)(t))L({type:S.v8});else{let e=new URLSearchParams(t.search).get("actingBusinessId");L({type:S.nt,id:e??D?.id})}}z(!0)},closeAccountSwitcher:()=>{L(M&&!(0,N.z6)(t)?{type:S.nt,id:D?.id}:{type:S.v8}),z(!1)},openAssetPanel:e=>{L({type:S.nt,id:e})},closeAssetPanel:()=>{L(M&&!(0,N.z6)(t)?{type:S.nt,id:D?.id}:{type:S.v8})},activateBusinessPanel:()=>{L({type:S.v8})},actingBusiness:D,selectedAccount:M,setSelectedAccount:F,setActingBusiness:H,accountSwitcherConfig:q,setConfig:K}),[P,B,Z,D,M,q,K,j,t]);return(0,O.jsx)(U,{value:V,children:e})}},684645:function(e,t,a){a.d(t,{IT:()=>o,SF:()=>p,WP:()=>c,bG:()=>m,p:()=>d,yo:()=>_});var i=a(731517),n=a(861241),s=a(27399),r=a(69406),l=a(681698),u=a(109563);let o=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:r.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),c=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:r.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),d=async({hierarchyId:e})=>(await (0,l.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`})).resource_response,m=async({user_id:e,username:t})=>{if(!t&&!e)return null;let{resource_response:{data:a}}=await s.Z.create("UserResource",{user_id:e,username:t}).callGet();return a},p=async({entityId:e})=>{let t=(await (0,i.Z)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]))[0];return t&&t.properties?t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG:{}},_=async({entityId:e,actingBusinessId:t,favorites:a})=>{let i={};(0,u.k)(t)||(i.actingBusinessId=t),a&&(i.favoriteAdAccounts={favoriteAdAccountsMap:{[a.actingBusinessId]:{advertiserId:a.adAccounts}}}),Object.keys(i).length>0&&await (0,n.Z)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:i}}])}},138482:function(e,t,a){a.d(t,{Z:()=>s});var i=a(616550);let n=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/collage-creation-tool","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/for-you","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/inbox","/install-shuffles","/invited","/jobs","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-data","/robots.txt","/safe-redirect","/search","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-image-lens-history","/upload-lens-image","/upload-profile-image","/upload-shuffle-draft","/verified","/verify","/videos","/web-custom-svg","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function s(e){return!!(0,i.LX)(e.pathname,{path:"/:username/",exact:!0})&&!n.includes(e.pathname.replace(/\/$/,""))}},387535:function(e,t,a){a.d(t,{Z:()=>i});function i(e){return{type:"UPDATE_VIEWER_IS_PROFILE_OWNER_OR_PROFILE_MANAGER",payload:e}}},498539:function(e,t,a){a.d(t,{Z:()=>i});let i=({businessAccess:e})=>e??{}},109563:function(e,t,a){function i(e){return null==e}function n(e){return!i(e)}a.d(t,{G:()=>n,k:()=>i})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16692-916ff6b2c063fac4.mjs.map